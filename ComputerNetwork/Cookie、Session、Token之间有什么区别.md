Cookie、Session 和 Token 是 Web 开发中用于身份验证和状态管理的三种常见机制，它们的核心区别在于 **存储位置、安全性、状态管理方式** 以及 **适用场景**。以下是详细对比：

---

### **1. Cookie**
- **定义**：存储在客户端（浏览器）的小型数据片段，由服务器通过 `Set-Cookie` 响应头下发，后续请求会自动携带。
- **特点**：
  - **存储位置**：客户端（浏览器）。
  - **安全性**：
    - 易受 XSS（跨站脚本攻击）窃取，需设置 `HttpOnly` 和 `Secure` 标志。
    - 需防范 CSRF（跨站请求伪造），可通过 CSRF Token 或 SameSite 属性缓解。
  - **生命周期**：可设置过期时间（会话级或持久化）。
  - **用途**：常用于 Session ID 的存储、记住登录状态等。
- **缺点**：容量小（通常 4KB）、需手动管理过期和安全策略。

---

### **2. Session**
- **定义**：服务器端存储的用户状态信息，通过唯一的 `Session ID`（通常通过 Cookie 传递）关联客户端。
- **特点**：
  - **存储位置**：服务器端（内存、数据库、Redis 等）。
  - **安全性**：
    - 数据存储在服务器，客户端仅保存 Session ID，相对安全。
    - 依赖 Cookie 的安全性（如 Session ID 泄露会导致会话劫持）。
  - **状态管理**：有状态（服务器需维护 Session 数据）。
  - **适用场景**：传统 Web 应用（如电商网站）。
- **缺点**：
  - 分布式系统中需共享 Session（如用 Redis），增加复杂性。
  - 服务器存储压力随用户量增长而增大。

---

### **3. Token（如 JWT）**
- **定义**：自包含的加密令牌，存储用户信息和权限，由服务器生成并返回客户端，客户端后续请求需主动携带。
- **特点**：
  - **存储位置**：客户端（通常存于 LocalStorage 或内存中）。
  - **安全性**：
    - Token 易被截获（需 HTTPS 加密传输）。
    - 无状态，无法主动失效（需依赖短有效期 + 刷新 Token）。
  - **状态管理**：无状态（服务器不存储 Token 信息）。
  - **适用场景**：API 接口、移动端、单页应用（SPA）。
- **优点**：
  - 跨域友好，适合分布式系统。
  - 减轻服务器存储压力。
- **缺点**：无法中途强制失效（如用户注销需依赖黑名单）。

---

### **核心区别总结**
| **特性**     | **Cookie**                | **Session**            | **Token**               |
| ------------ | ------------------------- | ---------------------- | ----------------------- |
| **存储位置** | 客户端（浏览器）          | 服务器端               | 客户端（任意存储）      |
| **状态**     | 无状态（仅存储数据）      | 有状态（服务器维护）   | 无状态（自包含数据）    |
| **安全性**   | 需防范 XSS/CSRF           | 依赖 Session ID 的安全 | 需防范 Token 泄露       |
| **扩展性**   | 一般                      | 差（需共享 Session）   | 好（天然分布式）        |
| **适用场景** | 传统 Web 应用、Session ID | 传统服务器端应用       | API、移动端、无状态服务 |

---

### **典型使用场景**
1. **Cookie + Session**：传统网站（如电商、论坛），依赖服务器维护用户状态。
2. **Token（JWT）**：移动端、单页应用（SPA）、微服务架构（如 RESTful API）。
3. **混合方案**：用 Cookie 存储 Token（需防范 XSS/CSRF），结合两者优势。

---

### **安全建议**
- **Cookie**：设置 `HttpOnly`、`Secure`、`SameSite=Strict`。
- **Token**：使用 HTTPS 传输，避免存储在 LocalStorage（推荐内存存储）。
- **通用**：敏感操作需二次验证（如短信、OTP），定期更新密钥。

根据实际需求（如安全性、扩展性、跨域需求）选择合适方案，或结合使用（如 OAuth 2.0）。