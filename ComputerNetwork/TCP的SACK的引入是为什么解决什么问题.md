TCP 的 **SACK（Selective Acknowledgment，选择性确认）** 是为了解决传统 TCP 确认机制（Cumulative ACK）在丢包场景下的效率问题，具体来说：

---

### **传统 TCP 的局限性**
1. **累积确认机制**：
   - 接收方只能通过 ACK 报文告知发送方“期望接收的下一字节序号”，即确认号（ACK Number）之前的字节都已正确接收。
   - **问题**：如果中间有数据包丢失，接收方只能重复确认最后一个连续接收的字节，发送方无法知道后续是否有数据包已成功到达。

2. **重传效率低下**：
   - 例如，发送方发送了数据包 1-5，但 3 号包丢失。接收方只能确认到 2 号包，发送方会误认为 2 号之后的所有包（3、4、5）都需要重传，即使 4、5 号包已被接收方收到。
   - 这会导致不必要的重传（如重复发送 4、5 号包），浪费带宽并降低传输效率。

---

### **SACK 的解决方案**
SACK 允许接收方在 ACK 报文中附加 **已接收的不连续数据块的范围信息**，使发送方能精确判断哪些数据包需要重传：

1. **选择性确认**：
   - 接收方通过 TCP 选项字段（Option）告知发送方“哪些数据块已经成功接收”，即使这些数据块不连续。
   - 例如，若接收方收到了 1-2、4-5 号包，但 3 号包丢失，SACK 会明确告知发送方：“我已收到 1-2 和 4-5，只需重传 3”。

2. **减少冗余重传**：
   - 发送方只需重传真正丢失的数据包（如 3 号包），避免重复发送已接收的后续包（如 4、5 号包），显著提升带宽利用率。

3. **快速恢复**：
   - 结合其他机制（如快速重传、NewReno 算法），SACK 能加速丢包后的恢复过程，减少传输延迟。

---

### **SACK 的实现细节**
- **协商启用**：在 TCP 三次握手时，双方通过 `SACK-Permitted` 选项声明支持 SACK。
- **数据结构**：SACK 选项字段最多可包含 3 个不连续的数据块范围（每个块用起始和结束序号表示）。
- **D-SACK**：扩展功能，允许接收方通知发送方重复接收的数据包，帮助检测网络中的重复传输问题。

---

### **适用场景**
SACK 在以下场景中效果显著：
- **高丢包率网络**（如无线网络、广域网）：精确重传减少冗余。
- **大窗口传输**：高带宽时延积（BDP）场景下，避免因单个丢包重传整个窗口的数据。

---

### **总结**
SACK 通过提供更精细的反馈机制，解决了传统 TCP 在丢包时因“盲目重传”导致的效率问题，是 TCP 协议优化传输性能的关键技术之一。