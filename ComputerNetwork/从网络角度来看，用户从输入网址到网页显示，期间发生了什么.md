当用户输入网址到网页显示，整个过程涉及多个网络和浏览器协作的步骤，以下是详细分解：

---

### **1. 输入网址 & 浏览器处理**
- **用户输入**：在浏览器地址栏输入网址（如 `https://www.example.com`）。
- **安全检查**：浏览器检查输入是否符合安全规范（如是否存在恶意网址）。
- **自动补全**：若输入不完整（如 `example.com`），浏览器可能补全为 `http://www.example.com`。

---

### **2. DNS 解析（域名 → IP 地址）**
- **缓存查询**：浏览器和操作系统依次检查缓存（浏览器缓存 → 系统 hosts 文件 → 本地 DNS 缓存）。
- **递归查询**：若未命中缓存，本地 DNS 服务器向根域名服务器、顶级域名服务器（如 `.com`）和权威服务器发起查询，最终获取目标 IP 地址。
- **返回结果**：DNS 服务器将 IP 地址返回给浏览器。

---

### **3. 建立 TCP 连接（三次握手）**
- **SYN**：浏览器向服务器 IP 发送 SYN（同步序列编号）请求，请求建立连接。
- **SYN-ACK**：服务器响应 SYN-ACK（同步确认）。
- **ACK**：浏览器发送 ACK 确认，TCP 连接建立。

---

### **4. TLS 握手（HTTPS 情况下）**
- **ClientHello**：浏览器发送支持的加密套件和随机数。
- **ServerHello**：服务器选择加密套件，发送证书（含公钥）和随机数。
- **密钥交换**：浏览器生成预主密钥，用服务器公钥加密后发送。
- **Finish**：双方生成会话密钥，加密通信开始。

---

### **5. 发送 HTTP 请求**
- **构建请求**：浏览器发送 HTTP 请求（如 `GET / HTTP/1.1`），包含头部（User-Agent、Accept 等）。
- **传输数据**：请求通过 TCP 连接发送到服务器。

---

### **6. 服务器处理请求**
- **Web 服务器**：服务器（如 Apache、Nginx）接收请求，解析 URL。
- **动态内容**：若需后端处理（如 PHP、数据库查询），调用应用服务器生成响应。
- **静态资源**：直接返回 HTML、CSS、JS 等文件。

---

### **7. 服务器返回 HTTP 响应**
- **状态码**：如 `200 OK`（成功）、`301`（重定向）、`404`（未找到）。
- **响应体**：包含 HTML 内容，可能附带压缩（如 gzip）或分块传输编码。

---

### **8. 浏览器解析与渲染**
- **HTML 解析**：构建 DOM 树，解析过程中遇到外部资源（CSS、JS、图片）时，发起额外请求。
- **CSSOM 构建**：解析 CSS 生成 CSS 对象模型，与 DOM 合并成渲染树。
- **布局与绘制**：计算元素位置（布局）、绘制像素（绘制），最终显示页面。

---

### **9. 加载子资源**
- **并行下载**：现代浏览器通过多个 TCP 连接或 HTTP/2 多路复用并行加载资源。
- **JavaScript 执行**：脚本可能阻塞解析，但 `async`/`defer` 属性允许异步加载。
- **缓存机制**：浏览器缓存资源（依据 `Cache-Control`、`ETag` 等头部），减少重复请求。

---

### **10. 关闭连接（四次挥手）**
- **FIN**：任一方发送 FIN 包请求关闭连接。
- **ACK & FIN**：另一方确认并发送自己的 FIN。
- **ACK**：最终确认，连接关闭。

---

### **关键优化机制**
- **HTTP/2**：多路复用、头部压缩减少延迟。
- **预加载**：浏览器提前解析 HTML 中的资源链接，加快后续加载。
- **CDN**：通过分布式服务器加速静态资源传输。

---

这一过程涉及 DNS、TCP/IP、HTTP、TLS 等协议的协作，浏览器通过解析、渲染和优化技术，最终将网页呈现给用户。